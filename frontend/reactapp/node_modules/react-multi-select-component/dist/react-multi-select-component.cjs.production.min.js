"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n=require("goober"),t=require("react"),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function a(){return(a=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}var o={selectSomeItems:"Select...",allItemsAreSelected:"All items are selected.",selectAll:"Select All",search:"Search",clearSearch:"Clear Search",clearSelected:"Clear Selected"},l={value:[],focusSearchOnOpen:!0,hasSelectAll:!0,className:"multi-select",debounceDuration:300,options:[]},c=r.createContext({}),i=function(e){var n=e.props,t=e.children;return r.createElement(c.Provider,{value:a({t:function(e){var t;return(null==(t=n.overrideStrings)?void 0:t[e])||o[e]}},l,n)},t)},s=function(){return r.useContext(c)},u=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.join(" ")};function d(e,n){var t=e.length,r=n.length,a=[];if(!t||!r)return 0;if(t<r){var o=[n,e];e=o[0],n=o[1]}if(-1!==e.indexOf(n))return r+1/t;for(var l=0;l<=t;++l)a[l]=[0];for(var c=0;c<=r;++c)a[0][c]=0;for(var i=1;i<=t;++i)for(var s=1;s<=r;++s)a[i][s]=e[i-1]===n[s-1]?1+a[i-1][s-1]:Math.max(a[i][s-1],a[i-1][s]);return a[t][r]}function f(e,n){if(!e)return"";if(e=e.toUpperCase().replace(/((?=[^\u00E0-\u00FC])\W)|_/g,""),!n)return e;var t=n;return Object.keys(t).reduce((function(e,n){var r=new RegExp(n,"g");return e.replace(r,t[n])}),e)}var p,m=function(){return r.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-search-clear-icon gray"},r.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))},v=n.css({"& input,& span":{verticalAlign:"middle",margin:0},span:{display:"inline-block",paddingLeft:"5px"},"&.disabled":{opacity:.5}}),h=function(e){var n=e.checked,t=e.option,a=e.onClick,o=e.disabled;return r.createElement("div",{className:u(v,"item-renderer",o&&"disabled")},r.createElement("input",{type:"checkbox",onChange:a,checked:n,tabIndex:-1,disabled:o}),r.createElement("span",null,t.label))},b=n.css({boxSizing:"border-box",cursor:"pointer",display:"block",padding:"var(--rmsc-p)",outline:0,"&:hover,&:focus":{background:"var(--rmsc-hover)"},"&.selected":{background:"var(--rmsc-selected)"}}),g=function(e){var n=e.itemRenderer,a=void 0===n?h:n,o=e.option,l=e.checked,c=e.focused,i=e.tabIndex,s=e.disabled,d=e.onSelectionChanged,f=e.onClick,p=t.useRef();t.useEffect((function(){v()}),[l,c]);var m=function(){d(!l)},v=function(){c&&!s&&p&&p.current.focus()};return r.createElement("label",{className:u(b,"select-item",l&&"selected"),role:"option","aria-selected":l,tabIndex:i,ref:p,onKeyDown:function(e){switch(e.which){case 13:case 32:m();break;default:return}e.preventDefault()}},r.createElement(a,{option:o,checked:l,onClick:function(e){m(),f(e)},disabled:s}))},x=n.css({margin:0,paddingLeft:0,li:{listStyle:"none",margin:0}}),E=function(e){var n=e.options,t=e.focusIndex,a=e.onClick,o=s(),l=o.disabled,c=o.value,i=o.onChange,u=o.ItemRenderer;return r.createElement("ul",{className:x},n.map((function(e,n){var o=n+2;return r.createElement("li",{key:(null==e?void 0:e.key)||n},r.createElement(g,{focused:t===o,tabIndex:o,option:e,onSelectionChanged:function(n){return t=e,void(l||i(n?[].concat(c,[t]):c.filter((function(e){return e.value!==t.value}))));var t},checked:!!c.find((function(n){return n.value===e.value})),onClick:function(e){return a(e,o)},itemRenderer:u,disabled:e.disabled||l}))})))};!function(e){e[e.SEARCH=-1]="SEARCH",e[e.NONE=1]="NONE"}(p||(p={}));var y=n.css({width:"100%",position:"relative",borderBottom:"1px solid var(--rmsc-border)",input:{height:"var(--rmsc-h)",padding:"0 var(--rmsc-p)",width:"100%",outline:0,border:0}}),k=n.css({cursor:"pointer",position:"absolute",top:0,right:0,bottom:0,background:"none",border:0,padding:"0 calc(var(--rmsc-p)/2)","[hidden]":{display:"none"}}),S=function(){var e,n,a,o=s(),l=o.t,c=o.onChange,i=o.options,v=o.value,h=o.filterOptions,b=o.selectAllLabel,x=o.ItemRenderer,S=o.disabled,w=o.disableSearch,C=o.focusSearchOnOpen,N=o.hasSelectAll,I=o.ClearIcon,A=o.debounceDuration,R=t.useState(""),O=R[0],D=R[1],M=t.useState(""),H=M[0],P=M[1],j=t.useState(C&&!w?p.SEARCH:p.NONE),L=j[0],T=j[1],B=t.useCallback((e=function(e){return P(e)},n=A,function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];clearTimeout(a),a=setTimeout((function(){e.apply(null,r)}),n)}),[]),K={label:b||l("selectAll"),value:""},z=function(e){return T(e)},F=function(){return h?h(i,H):function(e,n,t){if(!n)return e;var r=f(n,void 0);return e.filter((function(e){return null!=e.label&&null!=e.value})).map((function(e){return{option:e,score:d(f(e.label,void 0),r)}})).filter((function(e){return e.score>=r.length-2})).sort((function(e,n){return n.score-e.score})).map((function(e){return e.option}))}(i,H)},W=function(e){var n=L+e;n=Math.max(1,n),n=Math.min(n,i.length+1),T(n)},_=t.useMemo((function(){var e=F().filter((function(e){return!e.disabled}));return[e.every((function(e){return-1!==v.findIndex((function(n){return n.value===e.value}))})),0!==e.length]}),[O,v]),q=_[0],G=_[1];return r.createElement("div",{className:"select-panel",role:"listbox",onKeyDown:function(e){switch(e.which){case 38:if(e.altKey)return;W(-1);break;case 40:if(e.altKey)return;W(1);break;default:return}e.stopPropagation(),e.preventDefault()}},!w&&r.createElement("div",{className:y},r.createElement("input",{autoFocus:C,placeholder:l("search"),type:"text","aria-describedby":l("search"),onKeyDown:function(e){return e.stopPropagation()},onChange:function(e){B(e.target.value),D(e.target.value),T(p.SEARCH)},onFocus:function(){T(p.SEARCH)},value:O}),r.createElement("button",{type:"button",className:u(k,"search-clear-button"),hidden:!O,onClick:function(){P(""),D("")},"aria-label":l("clearSearch")},I||r.createElement(m,null))),N&&G&&r.createElement(g,{focused:1===L,tabIndex:1,checked:q,option:K,onSelectionChanged:function(e){var n=function(e){var n=F().filter((function(e){return!e.disabled})).map((function(e){return e.value}));if(e){var t=v.map((function(e){return e.value})),r=[].concat(t,n);return i.filter((function(e){return r.includes(e.value)}))}return v.filter((function(e){return!n.includes(e.value)}))}(e);c(n)},onClick:function(){return z(1)},itemRenderer:x,disabled:S}),r.createElement(E,{options:F(),focusIndex:L,onClick:function(e,n){return z(n)}}))},w=function(e){return r.createElement("svg",{width:"24",height:"24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"dropdown-heading-dropdown-arrow gray"},r.createElement("path",{d:e.expanded?"M18 15 12 9 6 15":"M6 9L12 15 18 9"}))},C=function(){var e=s(),n=e.t,t=e.value,a=e.options,o=e.valueRenderer,l=0===t.length,c=t.length===a.length,i=o&&o(t,a);return l?r.createElement("span",{className:"gray"},i||n("selectSomeItems")):r.createElement("span",null,i||(c?n("allItemsAreSelected"):t.map((function(e){return e.label})).join(", ")))},N=n.css({animation:"rotate 2s linear infinite","& .path":{stroke:"var(--rmsc-border)",strokeWidth:"4px",strokeLinecap:"round",animation:"dash 1.5s ease-in-out infinite"},"@keyframes rotate":{"100%":{transform:"rotate(360deg)"}},"@keyframes dash":{"0%":{strokeDasharray:"1,150",strokeDashoffset:0},"50%":{strokeDasharray:"90,150",strokeDashoffset:"-35"},"100%":{strokeDasharray:"90,150",strokeDashoffset:"-124"}}}),I=function(e){var n=e.size,t=void 0===n?24:n;return r.createElement("span",{style:{width:t,marginRight:"0.2rem"}},r.createElement("svg",{width:t,height:t,className:N,viewBox:"0 0 50 50",style:{display:"inline",verticalAlign:"middle"}},r.createElement("circle",{cx:"25",cy:"25",r:"20",fill:"none",className:"path"})))},A=n.css({position:"absolute",zIndex:1,top:"100%",width:"100%",paddingTop:"8px",".panel-content":{maxHeight:"300px",overflowY:"auto",borderRadius:"var(--rmsc-radius)",background:"var(--rmsc-bg)",boxShadow:"0 0 0 1px rgba(0, 0, 0, 0.1), 0 4px 11px rgba(0, 0, 0, 0.1)"}}),R=n.css({position:"relative",outline:0,backgroundColor:"var(--rmsc-bg)",border:"1px solid var(--rmsc-border)",borderRadius:"var(--rmsc-radius)","&:focus-within":{boxShadow:"var(--rmsc-main) 0 0 0 1px",borderColor:"var(--rmsc-main)"}}),O=n.css({position:"relative",padding:"0 var(--rmsc-p)",display:"flex",alignItems:"center",width:"100%",height:"var(--rmsc-h)",cursor:"default",outline:0,".dropdown-heading-value":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}}),D=n.css({cursor:"pointer",background:"none",border:0,padding:0,display:"flex"}),M=function(){var e=s(),n=e.t,a=e.onMenuToggle,o=e.ArrowRenderer,l=e.shouldToggleOnHover,c=e.isLoading,i=e.disabled,d=e.onChange,f=e.labelledBy,p=e.value,v=e.isOpen,h=e.defaultIsOpen,b=e.ClearSelectedIcon,g=t.useState(!0),x=g[0],E=g[1],y=t.useState(h),k=y[0],N=y[1],M=t.useState(!1),H=M[0],P=M[1],j=o||w,L=t.useRef();t.useEffect((function(){a&&a(k)}),[k]),t.useEffect((function(){void 0===h&&"boolean"==typeof v&&(E(!1),N(v))}),[v]);var T=function(e){x&&l&&N(e)};return r.createElement("div",{tabIndex:0,className:u(R,"dropdown-container"),"aria-labelledby":f,"aria-expanded":k,"aria-readonly":!0,"aria-disabled":i,ref:L,onKeyDown:function(e){var n;if(x)switch(e.which){case 27:case 38:N(!1),null==L||null==(n=L.current)||n.focus();break;case 32:case 13:case 40:N(!0);break;default:return}e.preventDefault()},onFocus:function(){return!H&&P(!0)},onBlur:function(e){!e.currentTarget.contains(e.relatedTarget)&&x&&(P(!1),N(!1))},onMouseEnter:function(){return T(!0)},onMouseLeave:function(){return T(!1)}},r.createElement("div",{className:u(O,"dropdown-heading"),onClick:function(){x&&N(!c&&!i&&!k)}},r.createElement("div",{className:"dropdown-heading-value"},r.createElement(C,null)),c&&r.createElement(I,null),p.length>0&&r.createElement("button",{type:"button",className:u(D,"clear-selected-button"),onClick:function(e){e.stopPropagation(),d([]),x&&N(!1)},"aria-label":n("clearSelected")},b||r.createElement(m,null)),r.createElement(j,{expanded:k})),k&&r.createElement("div",{className:u(A,"dropdown-content")},r.createElement("div",{className:"panel-content"},r.createElement(S,null))))},H=n.css({"--rmscMain":"#4285f4","--rmscHover":"#f1f3f5","--rmscSelected":"#e2e6ea","--rmscBorder":"#ccc","--rmscGray":"#aaa","--rmscBg":"#fff","--rmscP":"10px","--rmscRadius":"4px","--rmscH":"38px","*":{boxSizing:"border-box",transition:"all 0.2s ease"},".gray":{color:"var(--rmsc-gray)"}});exports.Dropdown=M,exports.SelectItem=g,exports.SelectPanel=S,exports.default=function(e){return r.createElement(i,{props:e},r.createElement("div",{className:u(H,e.className||"multi-select")},r.createElement(M,null)))};
//# sourceMappingURL=react-multi-select-component.cjs.production.min.js.map
